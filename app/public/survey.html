<!DOCTYPE html>
<html>

  <head>
    <!-- Tab Title -->
    <title>Friend Finder | Quiz</title>
    <!-- Link in a tab icon, cuz why not -->
    <link rel="icon" href="https://cdn3.iconfinder.com/data/icons/teamwork/256/friends-friendship-partner-team-teamwork-009-512.png">

    <script src="https://use.fontawesome.com/fa144432ef.js"></script>
    <!-- Latest compiled and minified CSS -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
  </head>


  <body>

    <div class = "container" style="background: rgba(240, 241, 206, 0.44)">
      

      <!-- Quiz Page Title -->
      <div class="page-header">
      <div class="page-header">
        <h1 style="font-size: 45px; text-align: center; margin-bottom: 35px; margin-top: 20px"><a href="/" style=" all: unset;"><i class="fa fa-users fa-2x" aria-hidden="true"></i> Friend Finder Quiz</a></h1>
      </div>


      <!-- User Name and Photo Panel -->
      <div class="card">
        <div class="card-header" style="background: rgba(232, 74, 11, 0.4)">
          <h3 class="card-title"><strong>About You</strong></h3>
        </div>
        <div class="card-body">
          <h4>Your Full Name</h4>
          <div class="input-group">
            <input id = "formName" class="form-control" type="text" name="name" placeholder="Jack Smith">
            <span class="input-group-addon">(Required)</span>
          </div>  
          <br>
          <h4>Link to a Photo Image</h4>
          <div class="input-group">
            <input id = "formImage" class="form-control" type="text" name="name" placeholder="http://yourphotolink.com.jpg">
            <span class="input-group-addon">(Required)</span>
          </div>
        </div>
      </div>

      <!-- Quiz Page Questions Panel -->
      <div class="card">
        <div class="card-header" style="background: rgba(232, 74, 11, 0.4)">
          <h3 class="card-title"><strong>Questionnaire</strong></h3>
        </div>
        <div class="card-body">
          
          <!-- Q1 -->
          <h4><strong>Question 1</strong></h4>
          <h5>Oxygen is important.</h5>
          <select data-placeholder="" class="chosen-select" id="Q1">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <!-- Q2 -->
          <h4><strong>Question 2</strong></h4>
          <h5>You are the first to take charge in social gatherings.</h5>
          <select data-placeholder="" class="chosen-select" id="Q2">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <!-- Q3 -->
          <h4><strong>Question 3</strong></h4>
          <h5>People can rarely upset you.</h5>
          <select data-placeholder="" class="chosen-select" id="Q3">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <!-- Q4 -->
          <h4><strong>Question 4</strong></h4>
          <h5>You never make decisions that you later feel bad about.</h5>
          <select data-placeholder="" class="chosen-select" id="Q4">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <!-- Q5 -->
          <h4><strong>Question 5</strong></h4>
          <h5>You never misplace things.</h5>
          <select data-placeholder="" class="chosen-select" id="Q5">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <!-- Q6 -->
          <h4><strong>Question 6</strong></h4>
          <h5>Crime doesn't pay.</h5>
          <select data-placeholder="" class="chosen-select" id="Q6">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <!-- Q7 -->
          <h4><strong>Question 7</strong></h4>
          <h5>You are more of a natural improviser than a careful planner.</h5>
          <select data-placeholder="" class="chosen-select" id="Q7">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <!-- Q8 -->
          <h4><strong>Question 8</strong></h4>
          <h5>You consider yourself to be more practical than artistic.</h5>
          <select data-placeholder="" class="chosen-select" id="Q8">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <!-- Q9 -->
          <h4><strong>Question 9</strong></h4>
          <h5>You have fun in a light-hearted atmosphere.</h5>
          <select data-placeholder="" class="chosen-select" id="Q9">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

          <!-- Q10 -->
          <h4><strong>Question 10</strong></h4>
          <h5>Dislike your friends.</h5>
          <select data-placeholder="" class="chosen-select" id="Q10">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>

        </div>
      </div>


      <!-- Quiz Submit Button -->
      <button id="submitSurvey" type="submit" class="btn btn-info btn-block"><h4><span class="glyphicon glyphicon-send"></span> Submit</h4></button> 
  
      <br>

      <!-- Webpage Footer -->
      <footer class="footer">
        <p><a href="/api/friends" style="color: #17a2b8;">API Friends List</a> | <a href="https://github.com/falond/Friend-Finder" style="color: #17a2b8;" target="_blank">GitHub Repo</a> | <a href="/" style="color: #17a2b8;">Home</a></p>
      </footer> 


      <!-- Match Modal -->
      <div id="resultsModal" class="modal fade" role="dialog">
        <div class="modal-dialog">

          <!-- Modal Content-->
          <div class="modal-content">

            <!-- "X" Button to close the modal -->
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">x</button>
              <h2 class="modal-title"><strong>Meet Your New Friend!</strong></h2>
            </div>

            <!-- Modal Body (For Match Info) -->
            <div class="modal-body">
              <h2 id="matchName"></h2>
              <img id="matchImg" src="" alt="" style="max-width: 350px;">
            </div>

            <!-- Modal Footer (Close Button) -->
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>

          </div>

        </div>
      </div>


    </div>


</body>
</html>

   <script type="text/javascript">



    $( document ).ready(function() {

      // The 'findSelectedAnswer' function captures the values selected as answers to survey questions.
      function findSelectedAnswer(){

        var selectedAnswer = $(this).find(":selected").text().charAt(0);

        if(selectedAnswersArr[parseInt($(this).attr("id"))]){
          selectedAnswersArr[parseInt($(this).attr("id"))] = selectedAnswer;
        }
        else
        {
          selectedAnswersArr.push(selectedAnswer);
        }
        validateForm();
      } // End of findSelectedAnswer()


      // The 'validateForm' function checks to make sure all required fields have a value.
      function validateForm() {

        // The assumption is that the survey HAS been filled out completely.
        var isValid = true;

        // However, the 'value' of each 'form-control' class element is checked.
        $('.form-control').each(function() {
        // If any value is empty ('') then the entire form is NOT valid.
          if ( $(this).val() === '' )
            isValid = false;
        });
        // If the check above passed then the function gives us a 'thumbs up'
        return isValid;
      }


    // When the 'Submit' button is clicked, the following occurs:
    //    The form inputs are captured and validated to make sure they're not blank
    //    THe data is send to the friends API.
    //    The friends API then returns the name and picture of the best match.

    // Create an global variable for an array that holds the answers to survey questions.
    var selectedAnswersArr= [];

    $("#submitSurvey").on("click", function() {

      // If the validation function gives us a 'thumbs up' then...
      if (validateForm() == true) {

        // We create a 'friendsData' object for the user's information
        var friendsData = {
          name: $("#formName").val(),
          photo: $("#formImage").val(),
          // jQuery for each question 'element' and the value provided by the user:
          scores: [$("#Q1").val(), $("#Q2").val(), $("#Q3").val(), $("#Q4").val(), $("#Q5").val(), $("#Q6").val(), $("#Q7").val(), $("#Q8").val(), $("#Q9").val(), $("#Q10").val(), ]
        }

        // Then get the URL of the website
        var currentURL = window.location.origin;

        // And send the data to the friends API which includes logic to determine the best match.
        $.post(currentURL + "/api/friends", $.param(friendsData, true), function(data){

          // The name and image of that match is the data returned by the callback function.
          $("#matchName").text(data.name);
          $('#matchImg').attr("src", data.photo);

          // Which are then displayed in the modal.
          $("#resultsModal").modal('toggle');
        }); //End of friends API

      }
      else
      {
        // Otherwise, the validation function was unable to give us a 'thumbs up'
        alert("Please fill out all fields before submitting!");
      }
      return false;
    });


    // When a clieck event occurs a selection the findVal function is called.
    $(document).on("click", "select", findSelectedAnswer);

  });

  //    $(document).ready(function() {
  //       // Event Listener for Submission
  //       $('#submitSurvey').on('click', function() {
          
  //         // Check if all the user fields are completed
  //         checkIfComplete(function(){
  //           // Proceed with AJAX call if all questions are answered
  //           if(allFieldsCompleted){
  //             collectInputs();
  //           }
  //           else{
  //             alert('Please complete all fields before submitting!');
  //           }
  //         }); // end checkIfComplete() callback
  //       }); // end submit listener
  //     }); // document ready
  // // Function to valid user input
  //     function checkIfComplete(callback){
  //       // Check through all the questions (i.e. iterate through all of class "chosen-select")
  //       var questionsCompleted;
  //       $('.chosen-select').each(function(){
  //         if ( $(this).val() == "" ){
  //           questionsCompleted = false;
  //         }
  //       })

  //        // This counters the async behavior of $.each()
  //       .promise().done(function(){
  //         // Check if any questions are incomplete
  //         if(questionsCompleted == false){
  //           allFieldsCompleted = false;
  //         }
  //         // Determine if Name is entered
  //         else if( $('#formName').val().trim() == "" ){
  //           allFieldsCompleted = false;
  //         }
  //         // Determine if Link is entered
  //         else if( $('#formImage').val().trim() == "" ){
  //           allFieldsCompleted = false;
  //         }
  //         // Otherwise, the all fields are completed
  //         else{
  //           allFieldsCompleted = true;
  //         }
  //         // Fire Off Callback (to counter async behavior of $.each)
  //         callback();       
  //       });
  //     }

  //     function collectInputs(){
  //       // Make new friend object
  //        var friendsData = {
  //         name: $("#name").val(),
  //         photo: $("#photo").val(),
  //         // jQuery for each question 'element' and the value provided by the user:
  //         scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(), ]
  //       }

  //       // Then get the URL of the website
  //       var currentURL = window.location.origin;

  //       // And send the data to the friends API which includes logic to determine the best match.
  //       $.post(currentURL + "/api/friends", $.param(friendsData, true), function(data){

  //         // The name and image of that match is the data returned by the callback function.
  //         $("#matchName").text(data.name);
  //         $('#matchImg').attr("src", data.photo);

  //         // Which are then displayed in the modal.
  //         $("#resultsModal").modal('toggle');
  //         }); // end AJAX POST
  //       };
  














    // var inputFeilds; 
    //           $("#submitSurvey").on("click", function(){
    //              checkIfComplete(function(){
    //               var friendSearch = {
    //               name: $("#formName").val().trim(),
    //               image: $("#formImage").val().trim(),
    //               scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val()]
    //           };
    //           // console.log(friendSearch);
            

    //           $.post("/api/friends", friendSearch, function(data) {
                
    //             if (inputFeilds){
    //             alert("Thank You!");
    //             collectInput();
    //             }

    //              // Clear the form when submitting
    //            $("#formName").val("");
    //            $("#formImage").val("");
    //            $("#reserve-email").val("");
    //            $("#reserve-unique-id").val("");
    //            $("#q1").val("");
    //            $("#q2").val("");
    //            $("#q3").val("");
    //            $("#q4").val("");
    //            $("#q5").val("");
    //            $("#q6").val("");
    //            $("#q7").val("");
    //            $("#q8").val("");
    //            $("#q9").val("");
    //            $("#q10").val("");


    //     });      

    //   });


             
   
    
          




  </script>







<!-- $("#submitSurvey").on("click", function(){
                  event.preventDefault();

                  function checkInput(){
           //check to see if all fields are completed
                    if (){
           // if yes then collect input
                      collectInput();
                    }
          //if no then alert with please fill out all fields before completing         
                    else{
                      alert("Please fill out all fields before submitting!");
                    }
              };
            });
            
            function collectInput(){
              //collect all input from survey fields
              var friendSearch = {
                name: $("#formName").val().trim(),
                image: $("#formImage").val().trim(),
                scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10"),val(), ]
              };
              console.log(friendSearch);


            }; -->

